<div class="sku-page">
  <div class="page-header">
    <h2>SKU Management</h2>
    <p>Add and manage SKU codes and specification values</p>
  </div>

  <!-- Panel 1: Add Specification values and SKU Code -->
  <div class="expandable-panel">
    <div class="panel-header" (click)="toggleSpecPanel()">
      <h3>Add Specification values and SKU Code</h3>
      <button class="toggle-btn" type="button">
        <svg class="toggle-icon" [class.rotated]="isSpecPanelExpanded()" viewBox="0 0 24 24" fill="currentColor">
          <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
        </svg>
      </button>
    </div>
    <div class="panel-content" [class.expanded]="isSpecPanelExpanded()">
      <div class="sku-form-container">
        <form class="sku-form">
          <div class="form-row-three">
            <div class="form-group">
              <label for="specification">Specification</label>
              <select id="specification" name="specification">
                <option value="">Select Specification</option>
                <!-- TODO: Populate options dynamically -->
                <option value="spec1">Specification 1</option>
                <option value="spec2">Specification 2</option>
              </select>
            </div>
            <div class="form-group">
              <label for="specValue">Value</label>
              <input id="specValue" type="text" name="specValue" placeholder="Enter value" />
            </div>
            <div class="form-group">
              <label for="skuCode">SKU Code</label>
              <input id="skuCode" type="text" name="skuCode" placeholder="Enter SKU code" />
            </div>
          </div>
          <div class="form-actions">
            <div style="display: flex; justify-content: flex-end; width: 100%; gap: 1rem;">
              <button type="submit" class="submit-btn">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                </svg>
                Add
              </button>
              <button type="reset" class="reset-btn">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                </svg>
                Reset
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Panel 2: Quick Actions -->
  <div class="expandable-panel">
    <div class="panel-header" (click)="toggleQuickPanel()">
      <h3>Quick Actions</h3>
      <button class="toggle-btn" type="button">
        <svg class="toggle-icon" [class.rotated]="isQuickPanelExpanded()" viewBox="0 0 24 24" fill="currentColor">
          <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
        </svg>
      </button>
    </div>
    <div class="panel-content" [class.expanded]="isQuickPanelExpanded()">
      <div class="quick-actions-card">
        <div class="actions-grid">
          <button class="action-btn" (click)="viewSkus()">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
            </svg>
            <span>View All SKUs</span>
          </button>
          <button class="action-btn" (click)="importSkus()">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
            </svg>
            <span>Import SKUs</span>
          </button>
          <button class="action-btn" (click)="exportSkus()">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 10h6v6h4l-7 7-7-7h4zm-4-4h14v2H5z"/>
            </svg>
            <span>Export Data</span>
          </button>
        </div>
        @if (showSkuGrid) {
          <div class="sku-grid-container">
            <div class="grid-header">
              <h3>All SKUs</h3>
              <button class="close-btn" (click)="hideSkuGrid()">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
              </button>
            </div>
            @if (isLoadingSkus) {
              <div class="loading-spinner">
                <div class="spinner"></div>
                <p>Loading SKUs...</p>
              </div>
            } @else if (pagedSkus.length === 0) {
              <div class="no-data">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                <p>No SKUs found. Add your first SKU using the form above.</p>
              </div>
            } @else {
              <div class="sku-table">
                <table>
                  <thead>
                    <tr>
                      <th>Specification Name</th>
                      <th>Value</th>
                      <th>SKU Code</th>
                      <th>Status</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    @for (sku of pagedSkus; track sku.id) {
                      <tr>
                        <td class="spec-name">{{ sku.specificationName }}</td>
                        <td class="spec-value">{{ sku.value }}</td>
                        <td class="sku-code">{{ sku.skuCode }}</td>
                        <td class="sku-status">
                          <span class="status-badge" [class.active]="sku.status === 'Active'">
                            {{ sku.status }}
                          </span>
                        </td>
                        <td class="sku-actions">
                          <button class="action-btn edit-btn" (click)="editSku(sku)">Edit</button>
                          <button class="action-btn delete-btn" (click)="deleteSku(sku)">Delete</button>
                        </td>
                      </tr>
                    }
                  </tbody>
                </table>
                <div class="pagination-controls" *ngIf="totalSkuPages > 1">
                  <button class="pagination-btn" [disabled]="currentSkuPage === 1" (click)="setSkuPage(currentSkuPage - 1)">Prev</button>
                  <span>Page {{ currentSkuPage }} of {{ totalSkuPages }}</span>
                  <button class="pagination-btn" [disabled]="currentSkuPage === totalSkuPages" (click)="setSkuPage(currentSkuPage + 1)">Next</button>
                </div>
              </div>
            }
          </div>
        }
      </div>
    </div>
  </div>
</div>